<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{%title%}</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Source+Han+Rounded&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/gh/alibaba/AliPuHuiTi/AliPuHuiTi-Rounded.css" rel="stylesheet">
    <style>
        body {
            margin: 0;
            display: flex;
            height: 100vh;
            font-family: "Noto Sans", "PingFang SC", sans-serif; /* æ›´ç°ä»£ã€æ›´é€šç”¨çš„å­—ä½“ */
            background-color: #f4f6f8; /* æ›´æŸ”å’Œçš„æ•´ä½“èƒŒæ™¯è‰² */
            color: #333; /* é»˜è®¤å­—ä½“é¢œè‰² */
        }

        .hidden {
            display: none;
        }

        /* ä¸»å†…å®¹åŒºæ ·å¼ */
        .content {
            border-radius: 12px; /* åœ†è§’è¾¹ç•Œ */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.12); /* æŸ”å’Œçš„é˜´å½± */
            background-color: #fff; /* æ˜äº®èƒŒæ™¯è‰² */
            padding: 16px; /* å¢åŠ å†…è¾¹è· */
            margin-bottom: 16px; /* é—´éš” */
        }

        /* å·¦å³åˆ†æ æ ·å¼ */
        .left-column, .right-column {
            padding: 20px;
            overflow-y: auto;
        }

        .left-column{
            flex: 0.47;
        }
        .right-column{
            flex: 0.53;
        }

        .left-column {
            background-color: #eef6ff; /* æ›´äº®çš„æµ…è“èƒŒæ™¯ */
            box-shadow: inset -1px 0px 5px rgba(0, 0, 0, 0.05); /* å†…é˜´å½± */
            font-family: "Source Han Rounded", "Alibaba PuHuiTi Rounded", "Noto Sans SC", sans-serif;
        }

        .right-column {
            background-color: #ffffff; /* æ˜äº®çš„èƒŒæ™¯è‰² */
            box-shadow: inset 1px 0px 5px rgba(0, 0, 0, 0.05); /* å†…é˜´å½± */
            font-family: "Noto Serif", "SimSun", serif; /* æ›´é€‚åˆé•¿æ–‡æœ¬é˜…è¯»çš„å­—ä½“ */
            position: relative;
        }
        .resizer {
            width: 6px;
            cursor: col-resize;
            background-color: #d1d1d1;
        }


        /* æ ‡é¢˜æ ·å¼ */
        .title {
            font-size: 1.4em; /* å¢å¤§æ ‡é¢˜å­—ä½“ */
            font-weight: 600; /* åŠç²—ä½“ */
            color: #1a1a1a; /* æ·±ç°è‰²æ ‡é¢˜ */
            margin-bottom: 12px; /* å¢åŠ ä¸‹æ–¹é—´è· */
        }

        .page-name.title {
            font-size: 1.8em; /* æ›´å¤§çš„å­—ä½“ */
            font-weight: bold; /* åŠ ç²—æ ‡é¢˜ */
            color: #222; /* æ›´æ·±çš„ç°è‰² */
            margin: 16px 0; /* å¢åŠ ä¸Šä¸‹é—´è· */
            text-align: left; /* å·¦å¯¹é½ */
        }

        .section-title {
            font-size: 1.4em; /* è°ƒæ•´å¤§å° */
            font-weight: bold;
            padding-left: 12px;
            margin-bottom: 0px;
            margin-top: 13px;
            color: #555; /* ä¸­ç°è‰²æ ‡é¢˜ */
        }

        /* æ®µè½æ ·å¼ */
        .section-content {
            font-family: 'Source Han Sans', "PingFang SC", sans-serif; /* æ›´ç°ä»£çš„ä¸­è‹±åŒè¯­å­—ä½“ */
            font-size: 0.95em;
            line-height: 1.5;
            color: #444; /* æŸ”å’Œçš„æ·±ç°è‰² */
            padding: 12px; /* å†…è¾¹è· */
            padding-top: 1px;
            padding-bottom: 6px;
            background-color: #f9fafc; /* æ›´æ¸…æ–°çš„èƒŒæ™¯è‰² */
            border: 1px solid #dde3ea; /* æ·»åŠ è¾¹æ¡† */
            border-radius: 12px; /* åœ†è§’ */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); /* è½»å¾®é˜´å½± */
            margin-bottom: 20px; /* å¢åŠ é—´è· */
        }

        /* åˆ†å‰²çº¿æ ·å¼ */
        hr {
            border: none;
            border-top: 1px solid #dcdcdc; /* æ›´æŸ”å’Œçš„åˆ†å‰²çº¿ */
            margin: 20px 0; /* å¢åŠ ä¸Šä¸‹é—´è· */
        }

        /* å…ƒæ•°æ®æ ·å¼ */
        .page-meta {
            margin-top: 12px;
            font-size: 0.85em; /* æ›´å°çš„å­—ä½“ */
            color: #666; /* æµ…ç°è‰² */
            line-height: 1.4;
        }

        .page-meta small {
            display: block;
            padding: 8px 12px;
            font-size: 0.9em;
            color: #333; /* æ›´æ·±çš„å­—ä½“é¢œè‰² */
            border-radius: 8px; /* åœ†è§’ */
            line-height: 1.4;
            margin-bottom: 10px; /* å¢åŠ é—´è· */
        }

        /* è¯„åˆ†æ ·å¼ */
        .page-rating {
            background-color: #e8f4ff; /* æµ…è“èƒŒæ™¯ */
            color: #0078d7; /* è“è‰²æ–‡å­— */
            font-weight: bold; /* åŠ ç²—æ–‡å­— */
            border: 1px solid #aad4ff; /* è¾¹æ¡† */
        }

        /* è¯„ä»·æ ·å¼ */
        .page-annotation {
            background-color: #fff5e5; /* æµ…é»„èƒŒæ™¯ */
            color: #cc8400; /* æ·±é»„è‰²æ–‡å­— */
            font-style: italic; /* æ–œä½“æ–‡å­— */
            border: 1px solid #ffcc66; /* è¾¹æ¡† */
        }

        .page-rating.hidden, .page-annotation.hidden {
            display: none; /* éšè—éƒ¨åˆ† */
        }

        /* é“¾æ¥æ ·å¼ */
        a {
            color: #0078d7; /* è“è‰² */
            text-decoration: none; /* ç§»é™¤ä¸‹åˆ’çº¿ */
        }

        a:hover {
            text-decoration: underline; /* é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºä¸‹åˆ’çº¿ */
        }

        /* æé«˜æ•´ä½“é—´è· */
        .content > * {
            margin-bottom: 12px; /* å¢åŠ å†…å®¹ä¹‹é—´çš„é—´è· */
        }

        /* query */
        .query-box{
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .query {
            flex: 0.7;
            top: 0; /* ç´§è´´é¡µé¢é¡¶éƒ¨ */
            z-index: 300; /* ç¡®ä¿åœ¨å…¶ä»–å…ƒç´ ä¹‹ä¸Š */
            background-color: #ffffff; /* çº¯ç™½èƒŒæ™¯ï¼Œæ¨¡æ‹Ÿè¾“å…¥æ¡† */
            color: #222; /* æ·±ç°è‰²æ–‡å­— */
            font-size: 1.1em; /* ç•¥å¤§çš„å­—ä½“ï¼Œæå‡å¯è¯»æ€§ */
            font-weight: 500; /* ä¸­ç­‰å­—ä½“æƒé‡ï¼Œè½»æ¾è€Œéåˆ»æ¿ */
            padding: 12px 16px; /* å†…è¾¹è·ï¼Œå¢å¼ºèˆ’é€‚æ„Ÿ */
            border-radius: 8px; /* åœ†è§’è®¾è®¡ï¼ŒæŸ”å’Œå¤–è§‚ */
            border: 1px solid #d1e4f2; /* æµ…è“è¾¹æ¡† */
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05), /* å†…é˜´å½±ï¼Œæ¨¡æ‹Ÿè¾“å…¥æ¡†çš„å‡¹é™·æ•ˆæœ */ 0 2px 4px rgba(0, 0, 0, 0.1); /* å¤–é˜´å½±ï¼Œæå‡ç«‹ä½“æ„Ÿ */
            margin-bottom: 16px; /* ä¸ä¸‹é¢å†…å®¹ç•™å‡ºç©ºé—´ */
            text-align: left; /* å·¦å¯¹é½ï¼Œæ¨¡æ‹Ÿè‡ªç„¶è¾“å…¥ */
            line-height: 1.6; /* æé«˜è¡Œé—´è·ï¼Œå¢å¼ºèˆ’é€‚æ€§ */
            font-family: "Inter", "Noto Sans", sans-serif; /* ä¸ sections ä¸åŒçš„å­—ä½“ï¼Œè½»æ¾ç°ä»£ */
            display: flex; /* ä½¿ç”¨ flexbox å¸ƒå±€ */
            align-items: center; /* ç¡®ä¿è¡¨æƒ…å’Œæ–‡å­—å‚ç›´å±…ä¸­ */
            gap: 10px; /* è¡¨æƒ…å’Œæ–‡å­—ä¹‹é—´çš„é—´è· */
        }
        .query-box .icon {
            flex: 0.3;
        }
        .icon{
            font-size: 3em;
        }
        /* Section Link */
        .section-link-box {
            display: inline-block; /* è®©é“¾æ¥ä¿æŒå—çŠ¶ä½†ä¸ç‹¬å ä¸€è¡Œ */
            margin: 4px 2px; /* æ§åˆ¶èƒ¶å›Šä¹‹é—´çš„é—´è· */
        }

        .section-link {
            display: inline-flex; /* ä½¿ç”¨ flex å¸ƒå±€å¯¹é½å†…å®¹ */
            align-items: center; /* å‚ç›´å±…ä¸­å¯¹é½ */
            padding: 6px 12px; /* å¢åŠ å†…è¾¹è·ï¼Œå¢å¼ºèƒ¶å›Šæ„Ÿ */
            background-color: #eef6ff; /* èƒ¶å›Šçš„èƒŒæ™¯è‰² */
            color: #0078d7; /* æ–‡å­—é¢œè‰² */
            font-size: 0.95em; /* è°ƒæ•´å­—ä½“å¤§å° */
            font-weight: 500; /* é€‚åº¦åŠ ç²— */
            text-decoration: none; /* å»æ‰ä¸‹åˆ’çº¿ */
            border: 1px solid #d1e4f2; /* èƒ¶å›Šçš„æµ…è‰²è¾¹æ¡† */
            border-radius: 20px; /* èƒ¶å›Šæ•ˆæœ */
            transition: all 0.2s ease; /* æ·»åŠ åŠ¨ç”»è¿‡æ¸¡æ•ˆæœ */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* æ·»åŠ è½»å¾®é˜´å½± */
        }

        .section-link:hover {
            background-color: #d1e9ff; /* æ‚¬åœæ—¶æ›´æ·±çš„èƒŒæ™¯è‰² */
            color: #005bb5; /* æ›´æ·±çš„æ–‡å­—é¢œè‰² */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* åŠ å¼ºé˜´å½±æ•ˆæœ */
            text-decoration: underline; /* å¯é€‰ï¼šæ·»åŠ ä¸‹åˆ’çº¿ */
        }

        /* Navigate æ ·å¼ */
        .navigate {
            display: flex; /* ä½¿ç”¨ flex å¸ƒå±€ */
            max-width: 40%;
            width: fit-content; /* å®½åº¦ç”±å†…å®¹å†³å®š */
            flex-wrap: nowrap; /* ç¦æ­¢æ¢è¡Œ */
            overflow-x: auto; /* æ°´å¹³æ–¹å‘å¼€å¯æ»šåŠ¨ */
            gap: 4px; /* å­å…ƒç´ ä¹‹é—´çš„é—´è· */
            justify-content: center; /* ä¸»è½´å±…ä¸­å¯¹é½ */
            padding: 4px 4px; /* å¢åŠ å†…è¾¹è· */
            background-color: #f4f6f8; /* æŸ”å’ŒèƒŒæ™¯è‰² */
            border-radius: 12px; /* åœ†è§’è®¾è®¡ */

            position: fixed;
            top: 0;
            left: 55%;
            /*transform: translateX(-50%);*/
            z-index: 1000; /* ç¡®ä¿å±‚çº§åœ¨å‰ */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* æ·»åŠ é˜´å½± */
            transition: transform 0.3s ease; /* å¹³æ»‘è¿‡æ¸¡æ•ˆæœ */
        }
        .navigate.navigate-hidden{
            transform: translateY(-110%);
        }

        /* Navigate é™æ€å†…å®¹ */
        .navigate-item {
            display: flex; /* ä½¿ç”¨ flex å¸ƒå±€ */
            flex-direction: column; /* å‚ç›´æ’åˆ—å­å…ƒç´  */
            align-items: center; /* æ°´å¹³å±…ä¸­ */
            justify-content: center; /* å‚ç›´å±…ä¸­ */
            background-color: #ffffff; /* èƒŒæ™¯è‰² */
            padding: 3px 6px; /* å¢åŠ å†…è¾¹è· */
            border-radius: 12px; /* åœ†è§’è®¾è®¡ */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); /* æ·»åŠ è½»å¾®é˜´å½± */
            transition: all 0.3s ease; /* å¹³æ»‘çš„äº¤äº’æ•ˆæœ */
        }
        .navigate-item:hover {
            background-color: #eef6ff; /* æ‚¬åœæ—¶æ›´æµ…çš„èƒŒæ™¯è‰² */
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15); /* å¢å¼ºé˜´å½±æ•ˆæœ */
            transform: translateY(2px); /* æ‚¬åœæ—¶å¾®å¾®ä¸Šæµ® */
        }
        .navigate-item.active {
            box-shadow: 0 0 10px 3px rgba(0, 120, 215, 0.5); /* è“è‰²åŒ…ç»œæ•ˆæœ */
            transform: translateY(1px); /* å¾®å¾®ä¸Šæµ® */
        }
        .navigate-item a {
            text-decoration: none; /* ç§»é™¤ä¸‹åˆ’çº¿ */
            color: #0078d7; /* è“è‰²å­—ä½“ */
            font-weight: bold; /* åŠ ç²—æ–‡å­— */
            font-size: 1em; /* å¢å¤§å­—ä½“ */
        }
        .navigate-item-emoji {
            font-size: 1.1em; /* æ”¾å¤§ emoji */
            margin-bottom: 1px; /* ä¸æ–‡å­—ä¿æŒé—´è· */
        }
        .navigate-item-id {
            font-size: 0.9em; /* ç¨å°çš„ ID å­—ä½“ */
            color: #555; /* ä¸­ç°è‰²å­—ä½“ */
        }

        [id] { /* å¯¼èˆªåä¸è¦è§¦é¡¶, ä¸å¥½çœ‹ */
            scroll-margin-top: 55px;
        }


    </style>
</head>

<body>
<div class="left-column">
    <div class="query-box">
        <div class="icon">ğŸ¤–ğŸ”</div>
        <div class="query {%query_display%}">
            {%query%}
        </div>
    </div>
    {%sections%}
</div>
<div class="resizer"></div>
<div class="right-column">
    <div class="icon">ğŸ“šğŸŒ</div>
    <div class="navigate">
        {%navigate%}
    </div>
    {%pages%}
</div>
</body>
<!--<script>-->
<!--    document.addEventListener("DOMContentLoaded", function () {-->
<!--        const navigate = document.querySelector(".navigate");-->
<!--        if (!navigate) {-->
<!--            console.error("æ‰¾ä¸åˆ° .navigate å…ƒç´ !");-->
<!--            return;-->
<!--        }-->

<!--        let lastScrollY = 0; // åˆå§‹åŒ–æ»šåŠ¨ä½ç½®-->
<!--        const scrollContainer = document.querySelector(".right-column");-->
<!--        let isNavigating = false;-->
<!--        document.querySelectorAll("a").forEach(link => {-->
<!--            link.addEventListener("click", () => {-->
<!--                isNavigating = true; // è®¾ç½®å¯¼èˆªçŠ¶æ€-->
<!--                navigate.classList.add("navigate-hidden"); // éšè—å¯¼èˆªæ -->

<!--                setTimeout(() => {-->
<!--                    isNavigating = false;-->
<!--                }, 100);-->
<!--            });-->
<!--        })-->

<!--        scrollContainer.addEventListener("scroll", () => {-->
<!--            const currentScrollY = scrollContainer.scrollTop; // è·å–å®¹å™¨çš„æ»šåŠ¨ä½ç½®-->

<!--            // åˆ¤æ–­æ»šåŠ¨æ–¹å‘-->
<!--            if (!isNavigating) {-->
<!--                if (currentScrollY > lastScrollY) {-->
<!--                    navigate.classList.add("navigate-hidden");-->
<!--                } else {-->
<!--                    navigate.classList.remove("navigate-hidden");-->
<!--                }-->
<!--            }-->

<!--            // æ›´æ–°ä¸Šä¸€æ¬¡çš„æ»šåŠ¨ä½ç½®-->
<!--            lastScrollY = currentScrollY;-->
<!--        });-->
<!--    });-->
<!--</script>-->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        // è·å–æ‰€æœ‰å¯¼èˆªé“¾æ¥
        const navLinks = document.querySelectorAll(".navigate-item");
        // å°†å¯¼èˆªé“¾æ¥ä¸ç›®æ ‡å…ƒç´ å»ºç«‹æ˜ å°„å…³ç³»
        const connections = Array.from(navLinks).map(link => {
            const targetId = link.getAttribute("href").substring(1); // å»æ‰ #
            const targetElement = document.getElementById(targetId);
            return { link, targetElement };
        });
        // ä½¿ç”¨ IntersectionObserver è§‚å¯Ÿç›®æ ‡å…ƒç´ 
        const observer = new IntersectionObserver(
            (entries) => {
                entries.forEach(entry => {
                    const { target, isIntersecting } = entry;
                    const matchingLink = connections.find(connection => connection.targetElement === target).link;
                    if (isIntersecting) {
                        // ç›®æ ‡å…ƒç´ åœ¨è§†é‡ä¸­ï¼Œæ·»åŠ é«˜äº®
                        console.log(matchingLink.className)
                        matchingLink.classList.add("active");
                    } else {
                        // ç›®æ ‡å…ƒç´ ç¦»å¼€è§†é‡ï¼Œç§»é™¤é«˜äº®
                        console.log(matchingLink.className)
                        matchingLink.classList.remove("active");
                    }
                });
            },
            {
                root: null, // é»˜è®¤è§†å£
                threshold: 0.02
            }
        );

        // å¼€å§‹è§‚å¯Ÿæ‰€æœ‰ç›®æ ‡å…ƒç´ 
        connections.forEach(({ targetElement }) => observer.observe(targetElement));
    });
</script>
<script>
    // è·å–å…ƒç´ 
    const resizer = document.querySelector('.resizer');
    const leftColumn = document.querySelector('.left-column');
    const rightColumn = document.querySelector('.right-column');
    const navigate = document.querySelector('.navigate')

    let isDragging = false;

    // é¼ æ ‡æŒ‰ä¸‹äº‹ä»¶
    resizer.addEventListener('mousedown', (event) => {
        isDragging = true;
        document.body.style.cursor = 'col-resize';
        document.body.style.userSelect = 'none';
    });

    // é¼ æ ‡ç§»åŠ¨äº‹ä»¶
    document.addEventListener('mousemove', (event) => {
        if (!isDragging) return;

        // è®¡ç®—æ–°çš„å®½åº¦
        const newLeftWidth = event.clientX / window.innerWidth * 100; // è½¬æ¢ä¸ºç™¾åˆ†æ¯”

        // é™åˆ¶å®½åº¦èŒƒå›´
        if (newLeftWidth > 15 && newLeftWidth < 70) {
            leftColumn.style.flexBasis = `${newLeftWidth}%`;
            rightColumn.style.flexBasis = `${100 - newLeftWidth}%`;
            navigate.style.left = `${newLeftWidth + 0.15 * (100 - newLeftWidth)}%`
            navigate.style.maxWidth = `${0.7 * (100 - newLeftWidth)}%`

            const navigateRect = navigate.getBoundingClientRect();
            const screenWidth = window.innerWidth;

            // è·å–å³ä¾§éƒ¨åˆ†å®½åº¦
            const rightColumnWidth = rightColumn.getBoundingClientRect().width;

            // è®¡ç®— navigate çš„å å±å¹•å®½åº¦æ¯”ä¾‹
            const navigateWidthPercentage = (navigateRect.width / screenWidth) * 100;

            // è®¡ç®— navigate å±…ä¸­æ‰€éœ€çš„ left å€¼
            const rightColumnLeft = rightColumn.getBoundingClientRect().left;
            const navigateLeft = rightColumnLeft + (rightColumnWidth - navigateRect.width) / 2;

            // è®¾ç½® navigate çš„å®½åº¦å’Œä½ç½®
            navigate.style.left = `${navigateLeft}px`;
        }
    });

    // é¼ æ ‡æ¾å¼€äº‹ä»¶
    document.addEventListener('mouseup', () => {
        isDragging = false;
        document.body.style.cursor = 'default';
        document.body.style.userSelect = 'auto';
    });
</script>
</html>